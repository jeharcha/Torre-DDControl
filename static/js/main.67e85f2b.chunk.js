(this["webpackJsonpcontrol-tower"]=this["webpackJsonpcontrol-tower"]||[]).push([[0],{17:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(23),r=n.n(a),i=(n(17),n(2)),o=n(47),l=n(91),j=n(1),b=function(e){var t=e.thisFlight;return Object(j.jsxs)(l.a,{children:[Object(j.jsxs)(l.a.Body,{children:[Object(j.jsxs)("h5",{children:[" Flight N\xb0: ",t.code]}),Object(j.jsxs)(l.a.Text,{children:[Object(j.jsxs)("p",{children:[" Airline: ",t.airline," "]}),Object(j.jsxs)("p",{children:[" Origin: ",t.origin]}),Object(j.jsxs)("p",{children:[" Destionation: ",t.destination]}),Object(j.jsxs)("p",{children:[" Plane: ",t.plane]}),Object(j.jsx)("strong",{children:" Passengers:"}),t.passengers.map((function(e){return Object(j.jsxs)("div",{children:[Object(j.jsxs)("li",{children:["Name: ","\n"+e.name]}),Object(j.jsxs)("li",{children:["Age: ",e.age]})]})}))]})]}),Object(j.jsx)(l.a.Footer,{})]})},u=n(25),O=n.n(u),d=O.a.connect("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{transports:["websocket"],path:"/flights"}),h=s.a.createContext(),m=function(e){Object(o.a)(e);var t=Object(c.useContext)(h),n=Object(c.useState)([{code:"",airline:"",origin:[0,0],destination:[0,0],plane:"",seats:0,passengers:[{name:"",age:0}]}]),s=Object(i.a)(n,2),a=s[0],r=s[1],l=Object(c.useCallback)((function(e){r(e)}),[]);return Object(c.useEffect)((function(){return t.emit("FLIGHTS",{}),t.on("FLIGHTS",(function(e){return l(e)})),console.log(a),function(){}}),[a,t,l]),Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:"Flights Board"}),Object(j.jsx)("div",{className:"row-container",children:a.map((function(e){return Object(j.jsx)(b,{thisFlight:e})}))})]})},x=(n(85),n(26)),g="CHAT",f=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useRef)();Object(c.useEffect)((function(){return a.current=O()("http://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights",transports:["websocket"]}),a.current.on(g,(function(e){s((function(t){return[].concat(Object(x.a)(t),[e])}))})),function(){a.current.disconnect()}}),[]);return{messageObjects:n,sendMessageObject:function(e,t){a.current.emit(g,{name:e,message:t})}}},p=function(e){var t=f(),n=t.messageObjects,s=t.sendMessageObject,a=Object(c.useState)(""),r=Object(i.a)(a,2),o=r[0],l=r[1],b="Navon ";return Object(j.jsxs)("div",{className:"chat-room-container",children:[Object(j.jsx)("h4",{className:"room-name",children:"Control Tower Chat"}),Object(j.jsx)("div",{className:"messages-container",children:Object(j.jsx)("ol",{className:"messages-list",children:n.map((function(e,t){return Object(j.jsxs)("li",{className:"message-item ".concat(e.name===b?"my-message":"received-message"),children:["(",new Date(e.date).toUTCString().substr(0,25),")","\n"+e.name," ",": ",e.message]},t)}))})}),Object(j.jsxs)("div",{className:"row-container",children:[Object(j.jsx)("textarea",{value:o,onChange:function(e){"Enter"!==e.key&&13!==e.keyCode&&l(e.target.value)},placeholder:"Write message...",className:"new-message-input-field"}),Object(j.jsx)("button",{onClick:function(){s(b,o),l("")},className:"send-message-button",children:"Send"})]})]})},v=n(89),N=n(92),C=n(90),k=n(11);n.p;var w=function(){new k.LatLngBounds([-34.82264,-58.533321],[-33.382761,-70.803203]);var e=[{color:"lime"},{color:"red"},{color:"blue"},{color:"orange"},{color:"violet"}],t=Object(c.useContext)(h),n=Object(c.useState)([]),s=Object(i.a)(n,2),a=(s[0],s[1]),r=Object(c.useState)(0),o=Object(i.a)(r,2),l=(o[0],o[1]),b=Object(c.useState)([]),u=Object(i.a)(b,2),O=u[0],d=u[1],m=Object(c.useState)([]),g=Object(i.a)(m,2),f=(g[0],g[1],Object(c.useCallback)((function(e){e.map((function(e){return d((function(t){return[].concat(Object(x.a)(t),[[e.origin,e.destination]])}))})),l(e.length),a(e)}),[]));return Object(c.useEffect)((function(){return t.emit("FLIGHTS",{}),t.on("FLIGHTS",(function(e){return f(e)})),function(){}}),[t,f]),Object(j.jsxs)("div",{children:[Object(j.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css",integrity:"sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==",crossorigin:""}),Object(j.jsx)("script",{src:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js",integrity:"sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==",crossorigin:""}),Object(j.jsx)("div",{children:"Real Time Map"}),Object(j.jsx)("div",{id:"mapid",children:Object(j.jsxs)(v.a,{center:[-38.45,-70.666667],zoom:4,scrollWheelZoom:!0,className:"leaflet-container",children:[Object(j.jsx)(N.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),O.map((function(t,n){return Object(j.jsx)(C.a,{pathOptions:e[n%4],positions:t})}))]})})]})};var S=function(){return Object(j.jsx)(h.Provider,{value:d,children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("div",{className:"up-left-box",children:Object(j.jsx)(w,{})}),Object(j.jsx)("div",{className:"right-column",children:Object(j.jsx)(p,{})}),Object(j.jsx)("div",{className:"bottom-left-box",children:Object(j.jsx)(m,{})})]})})};r.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(S,{})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.67e85f2b.chunk.js.map